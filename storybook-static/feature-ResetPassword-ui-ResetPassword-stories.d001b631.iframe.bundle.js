"use strict";(self.webpackChunkmu_cloud=self.webpackChunkmu_cloud||[]).push([[7944],{"./src/feature/ResetPassword/ui/ResetPassword.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Idle:()=>Idle,Loading:()=>Loading,default:()=>ResetPassword_stories});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),StoreDecorator=__webpack_require__("./src/shared/config/storybook/StoreDecorator/StoreDecorator.tsx"),backendUrl=__webpack_require__("./src/shared/const/backendUrl.ts"),react=__webpack_require__("./node_modules/react/index.js"),DynamicModuleLoader=__webpack_require__("./src/shared/config/DynamicModuleLoader/DynamicModuleLoader.tsx"),Form=__webpack_require__("./src/shared/ui/Form/index.ts"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),store=__webpack_require__("./src/global/providers/StoreProvider/config/store.ts"),Input=__webpack_require__("./src/shared/ui/Input/index.ts"),getEmail=function getEmail(state){var _state$resetPassword;return null===(_state$resetPassword=state.resetPassword)||void 0===_state$resetPassword?void 0:_state$resetPassword.email};try{getEmail.displayName="getEmail",getEmail.__docgenInfo={description:"",displayName:"getEmail",props:{player:{defaultValue:null,description:"",name:"player",required:!0,type:{name:"PlayerSchema"}},signin:{defaultValue:null,description:"",name:"signin",required:!1,type:{name:"SigninSchema"}},signup:{defaultValue:null,description:"",name:"signup",required:!1,type:{name:"SignupSchema"}},addNewTrack:{defaultValue:null,description:"",name:"addNewTrack",required:!1,type:{name:"AddNewTrackSchema"}},addNewTrackSeparateImageLoading:{defaultValue:null,description:"",name:"addNewTrackSeparateImageLoading",required:!1,type:{name:"AddNewTrackSeparateImageLoadingSchema"}},EditProfile:{defaultValue:null,description:"",name:"EditProfile",required:!1,type:{name:"EditProfileSchema"}},resetPassword:{defaultValue:null,description:"",name:"resetPassword",required:!1,type:{name:"ResetPasswordSchema"}},confirmResetPassword:{defaultValue:null,description:"",name:"confirmResetPassword",required:!1,type:{name:"ConfirmResetPasswordSchema"}},api:{defaultValue:null,description:"",name:"api",required:!0,type:{name:'CombinedState<{}, "Liked" | "subscribe", "api">'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/feature/ResetPassword/model/selectors/getEmail.tsx#getEmail"]={docgenInfo:getEmail.__docgenInfo,name:"getEmail",path:"src/feature/ResetPassword/model/selectors/getEmail.tsx#getEmail"})}catch(__react_docgen_typescript_loader_error){}var redux_toolkit_esm=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),initialState={email:"",error:void 0,status:"idle"},ResetPasswordSlice=(0,redux_toolkit_esm.oM)({name:"ResetPassword",initialState,reducers:{setEmail:function setEmail(state,action){"idle"===state.status&&(state.email=action.payload)},setError:function setError(state,action){state.error=action.payload},setStatus:function setStatus(state,action){state.status=action.payload}}}),ResetPasswordActions=ResetPasswordSlice.actions,ResetPasswordReducer=ResetPasswordSlice.reducer,getStatus=function getStatus(state){var _state$resetPassword;return null===(_state$resetPassword=state.resetPassword)||void 0===_state$resetPassword?void 0:_state$resetPassword.status};try{getStatus.displayName="getStatus",getStatus.__docgenInfo={description:"",displayName:"getStatus",props:{player:{defaultValue:null,description:"",name:"player",required:!0,type:{name:"PlayerSchema"}},signin:{defaultValue:null,description:"",name:"signin",required:!1,type:{name:"SigninSchema"}},signup:{defaultValue:null,description:"",name:"signup",required:!1,type:{name:"SignupSchema"}},addNewTrack:{defaultValue:null,description:"",name:"addNewTrack",required:!1,type:{name:"AddNewTrackSchema"}},addNewTrackSeparateImageLoading:{defaultValue:null,description:"",name:"addNewTrackSeparateImageLoading",required:!1,type:{name:"AddNewTrackSeparateImageLoadingSchema"}},EditProfile:{defaultValue:null,description:"",name:"EditProfile",required:!1,type:{name:"EditProfileSchema"}},resetPassword:{defaultValue:null,description:"",name:"resetPassword",required:!1,type:{name:"ResetPasswordSchema"}},confirmResetPassword:{defaultValue:null,description:"",name:"confirmResetPassword",required:!1,type:{name:"ConfirmResetPasswordSchema"}},api:{defaultValue:null,description:"",name:"api",required:!0,type:{name:'CombinedState<{}, "Liked" | "subscribe", "api">'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/feature/ResetPassword/model/selectors/getStatus.tsx#getStatus"]={docgenInfo:getStatus.__docgenInfo,name:"getStatus",path:"src/feature/ResetPassword/model/selectors/getStatus.tsx#getStatus"})}catch(__react_docgen_typescript_loader_error){}var __jsx=react.createElement,EmailInput=function EmailInput(_ref){var className=_ref.className,email=(0,es.v9)(getEmail),status=(0,es.v9)(getStatus),dispatch=(0,store.T)(),onChangeEmail=(0,react.useCallback)((function(e){dispatch(ResetPasswordActions.setEmail(e.target.value))}),[dispatch]);return __jsx(Input.I,{label:"Email",value:email,onChange:onChangeEmail,disabled:"loading"===status,className})};EmailInput.displayName="EmailInput",EmailInput.__docgenInfo={description:"",methods:[],displayName:"EmailInput"};try{EmailInput.displayName="EmailInput",EmailInput.__docgenInfo={description:"",displayName:"EmailInput",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/feature/ResetPassword/ui/EmailInput/EmailInput.tsx#EmailInput"]={docgenInfo:EmailInput.__docgenInfo,name:"EmailInput",path:"src/feature/ResetPassword/ui/EmailInput/EmailInput.tsx#EmailInput"})}catch(__react_docgen_typescript_loader_error){}var Button=__webpack_require__("./src/shared/ui/Button/index.ts"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),dist=__webpack_require__("./node_modules/react-hot-toast/dist/index.mjs"),reset_reset=(0,redux_toolkit_esm.hg)("ResetPassword/reset",function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(_,thunkApi){var dispatch,getState,email,response;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return dispatch=thunkApi.dispatch,thunkApi.rejectWithValue,getState=thunkApi.getState,email=getEmail(getState()),_context.prev=2,dispatch(ResetPasswordActions.setStatus("loading")),_context.next=6,fetch(backendUrl.A+"/auth/reset/link?email="+email);case 6:if(response=_context.sent,window.navigator.onLine){_context.next=10;break}return dispatch(ResetPasswordActions.setStatus("idle")),_context.abrupt("return",(0,dist.ZP)("Ошибка. Нет соединения с интернетом"));case 10:if(200!==response.status){_context.next=14;break}return(0,dist.ZP)("Ссылка для сброса пароля отправлена на ваш Email"),dispatch(ResetPasswordActions.setStatus("idle")),_context.abrupt("return");case 14:throw Error();case 17:return _context.prev=17,_context.t0=_context.catch(2),dispatch(ResetPasswordActions.setStatus("idle")),_context.abrupt("return",(0,dist.ZP)("Произошла неожиданная ошибка"));case 21:case"end":return _context.stop()}}),_callee,null,[[2,17]])})));return function(_x,_x2){return _ref.apply(this,arguments)}}()),SubmitButton_jsx=react.createElement,SubmitButton=function SubmitButton(){var status=(0,es.v9)(getStatus),dispatch=(0,store.T)(),onFormSubmit=(0,react.useCallback)((function(e){e.preventDefault(),dispatch(reset_reset())}),[dispatch]);return SubmitButton_jsx(Button.z,{variant:"green",fullwidth:!0,disabled:"loading"===status,onClick:onFormSubmit},"loading"===status?"Загрузка...":"Сбросить")};SubmitButton.displayName="SubmitButton",SubmitButton.__docgenInfo={description:"",methods:[],displayName:"SubmitButton"};try{SubmitButton.displayName="SubmitButton",SubmitButton.__docgenInfo={description:"",displayName:"SubmitButton",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/feature/ResetPassword/ui/SubmitButton/SubmitButton.tsx#SubmitButton"]={docgenInfo:SubmitButton.__docgenInfo,name:"SubmitButton",path:"src/feature/ResetPassword/ui/SubmitButton/SubmitButton.tsx#SubmitButton"})}catch(__react_docgen_typescript_loader_error){}var getError=function getError(state){var _state$resetPassword;return null===(_state$resetPassword=state.resetPassword)||void 0===_state$resetPassword?void 0:_state$resetPassword.error};try{getError.displayName="getError",getError.__docgenInfo={description:"",displayName:"getError",props:{player:{defaultValue:null,description:"",name:"player",required:!0,type:{name:"PlayerSchema"}},signin:{defaultValue:null,description:"",name:"signin",required:!1,type:{name:"SigninSchema"}},signup:{defaultValue:null,description:"",name:"signup",required:!1,type:{name:"SignupSchema"}},addNewTrack:{defaultValue:null,description:"",name:"addNewTrack",required:!1,type:{name:"AddNewTrackSchema"}},addNewTrackSeparateImageLoading:{defaultValue:null,description:"",name:"addNewTrackSeparateImageLoading",required:!1,type:{name:"AddNewTrackSeparateImageLoadingSchema"}},EditProfile:{defaultValue:null,description:"",name:"EditProfile",required:!1,type:{name:"EditProfileSchema"}},resetPassword:{defaultValue:null,description:"",name:"resetPassword",required:!1,type:{name:"ResetPasswordSchema"}},confirmResetPassword:{defaultValue:null,description:"",name:"confirmResetPassword",required:!1,type:{name:"ConfirmResetPasswordSchema"}},api:{defaultValue:null,description:"",name:"api",required:!0,type:{name:'CombinedState<{}, "Liked" | "subscribe", "api">'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/feature/ResetPassword/model/selectors/getError.tsx#getError"]={docgenInfo:getError.__docgenInfo,name:"getError",path:"src/feature/ResetPassword/model/selectors/getError.tsx#getError"})}catch(__react_docgen_typescript_loader_error){}var FormError_jsx=react.createElement,FormError=function FormError(props){var errorMessage=(0,es.v9)(getError);return errorMessage?FormError_jsx(Form.l.Box,{margin:"auto"},errorMessage):null};FormError.displayName="FormError",FormError.__docgenInfo={description:"",methods:[],displayName:"FormError"};try{FormError.displayName="FormError",FormError.__docgenInfo={description:"",displayName:"FormError",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/feature/ResetPassword/ui/FormError/FormError.tsx#FormError"]={docgenInfo:FormError.__docgenInfo,name:"FormError",path:"src/feature/ResetPassword/ui/FormError/FormError.tsx#FormError"})}catch(__react_docgen_typescript_loader_error){}var injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),ResetPassword_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/postcss-loader/dist/cjs.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[4]!./src/feature/ResetPassword/ui/ResetPassword.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(ResetPassword_module.Z,options);const ui_ResetPassword_module=ResetPassword_module.Z&&ResetPassword_module.Z.locals?ResetPassword_module.Z.locals:void 0;var _Idle$parameters,_Idle$parameters2,_Loading$parameters,_Loading$parameters2,ResetPassword_jsx=react.createElement,reducers={resetPassword:ResetPasswordReducer},ResetPassword=(0,react.memo)((function(){return ResetPassword_jsx(DynamicModuleLoader.W,{reducers,removeAfterUnmount:!0},ResetPassword_jsx(Form.l,{margin:"auto",className:ui_ResetPassword_module.form},ResetPassword_jsx(EmailInput,{className:ui_ResetPassword_module.last_input}),ResetPassword_jsx(SubmitButton,null)),ResetPassword_jsx(FormError,null))}));ResetPassword.displayName="ResetPassword";try{ResetPassword.displayName="ResetPassword",ResetPassword.__docgenInfo={description:"",displayName:"ResetPassword",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/feature/ResetPassword/ui/ResetPassword.tsx#ResetPassword"]={docgenInfo:ResetPassword.__docgenInfo,name:"ResetPassword",path:"src/feature/ResetPassword/ui/ResetPassword.tsx#ResetPassword"})}catch(__react_docgen_typescript_loader_error){}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}const ResetPassword_stories={title:"feature/ResetPassword (client)",component:ResetPassword,parameters:{mockData:[{url:backendUrl.A+"/auth/reset/link",method:"GET",status:201,response:"",delay:3e3}]}};var args={},Idle={args,decorators:[(0,StoreDecorator.l)({resetPassword:{email:"",error:void 0,status:"idle"}})]},Loading={args,decorators:[(0,StoreDecorator.l)({resetPassword:{email:"",error:void 0,status:"loading"}})]};Idle.parameters=_objectSpread(_objectSpread({},Idle.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Idle$parameters=Idle.parameters)||void 0===_Idle$parameters?void 0:_Idle$parameters.docs),{},{source:_objectSpread({originalSource:"{\n  args,\n  decorators: [StoreDecorator({\n    resetPassword: {\n      email: '',\n      error: undefined,\n      status: 'idle'\n    }\n  })]\n}"},null===(_Idle$parameters2=Idle.parameters)||void 0===_Idle$parameters2||null===(_Idle$parameters2=_Idle$parameters2.docs)||void 0===_Idle$parameters2?void 0:_Idle$parameters2.source)})}),Loading.parameters=_objectSpread(_objectSpread({},Loading.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Loading$parameters=Loading.parameters)||void 0===_Loading$parameters?void 0:_Loading$parameters.docs),{},{source:_objectSpread({originalSource:"{\n  args,\n  decorators: [StoreDecorator({\n    resetPassword: {\n      email: '',\n      error: undefined,\n      status: 'loading'\n    }\n  })]\n}"},null===(_Loading$parameters2=Loading.parameters)||void 0===_Loading$parameters2||null===(_Loading$parameters2=_Loading$parameters2.docs)||void 0===_Loading$parameters2?void 0:_Loading$parameters2.source)})})},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!./node_modules/postcss-loader/dist/cjs.js!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[4]!./src/feature/ResetPassword/ui/ResetPassword.module.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".ResetPassword_last_input__DFThh{margin-bottom:16px}.ResetPassword_error__x6WeW{margin-top:8px}form.ResetPassword_form__ssscq{margin-bottom:16px}","",{version:3,sources:["webpack://./src/feature/ResetPassword/ui/ResetPassword.module.scss"],names:[],mappings:"AAAA,iCACI,kBAAA,CAGJ,4BACI,cAAA,CAGJ,+BACI,kBAAA",sourcesContent:[".last_input{\n    margin-bottom: 16px;\n}\n\n.error{\n    margin-top: 8px;\n}\n\nform.form {\n    margin-bottom: 16px;\n}"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={last_input:"ResetPassword_last_input__DFThh",error:"ResetPassword_error__x6WeW",form:"ResetPassword_form__ssscq"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);